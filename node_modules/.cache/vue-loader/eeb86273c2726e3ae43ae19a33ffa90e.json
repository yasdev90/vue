{"remainingRequest":"C:\\Users\\user\\Desktop\\Yasser\\vue-todoList\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\user\\Desktop\\Yasser\\vue-todoList\\src\\views\\Home.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\user\\Desktop\\Yasser\\vue-todoList\\src\\views\\Home.vue","mtime":1595323523586},{"path":"C:\\Users\\user\\Desktop\\Yasser\\vue-todoList\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1595230478595},{"path":"C:\\Users\\user\\Desktop\\Yasser\\vue-todoList\\node_modules\\babel-loader\\lib\\index.js","mtime":1595230478204},{"path":"C:\\Users\\user\\Desktop\\Yasser\\vue-todoList\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1595230478595},{"path":"C:\\Users\\user\\Desktop\\Yasser\\vue-todoList\\node_modules\\vue-loader\\lib\\index.js","mtime":1595230489691}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICdheGlvcycKaW1wb3J0IFRvZG9zTGlzdCBmcm9tICcuLi9jb21wb25lbnRzL3RvZG9zLWxpc3QudnVlJwppbXBvcnQgVG9kb3NJbmZvIGZyb20gJy4uL2NvbXBvbmVudHMvdG9kb3MtaW5mby52dWUnCmltcG9ydCBQYWdpbmcgZnJvbSAnLi4vY29tcG9uZW50cy9wYWdlcy1uYXZpZ2F0aW9uLnZ1ZScKaW1wb3J0IEFkZFRvZG8gZnJvbSAnLi4vY29tcG9uZW50cy9hZGQtdG9kbycKaW1wb3J0IHN0YXRpY0pzb24gZnJvbSAnLi4vLi4vZGIuanNvbicKaW1wb3J0IHthcHBDb25maWd1cmF0aW9uc30gZnJvbSAnLi4vY29uZmlnJwpjb25zdCBiYXNlQXBpVXJsID0gYXBwQ29uZmlndXJhdGlvbnMuYmFzZUFwaVVybAoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdIb21lJywKICBjb21wb25lbnRzOiB7CiAgICBUb2Rvc0xpc3QsCiAgICBQYWdpbmcsCiAgICBUb2Rvc0luZm8sCiAgICBBZGRUb2RvCiAgfSwKICBwcm9wczpbInBhZ2VTaXplIl0sCiAgZGF0YSgpewogICAgcmV0dXJuewogICAgICBkaXNwbGF5ZWRUb2RvczpbXSwKICAgICAgZmlsdGVyZFRvZG9zOltdLAogICAgICBwYWdlSW5kZXggOiAxLAogICAgICBsYXN0SXRlbUluZGV4IDowLAogICAgICBwYWdlc0NvdW50OjAsCiAgICAgc2hvd09wdGlvbnM6W10sCiAgICAgdG9kb3NMaXN0RGF0YTpbXQogICAgfQogIH0sCiAgbWV0aG9kczp7CiAgICBhZGRUb2RvKG5ld1RvZG8pewogICAgICB0cnl7ICAgICAgICAgICAgCiAgICAgICAgYXhpb3MucG9zdChiYXNlQXBpVXJsLCBuZXdUb2RvKS50aGVuKHJlcz0+ewogICAgICAgIHRoaXMuZmlsdGVyZFRvZG9zLnB1c2gobmV3VG9kbykKICAgICAgICB0aGlzLnRvZG9zTGlzdERhdGEgPSAgWy4uLnRoaXMudG9kb3NMaXN0RGF0YSwgcmVzLmRhdGFdCiAgICAgICAgdGhpcy5zZXRQYWdlU2l6ZShsb2NhbFN0b3JhZ2UuaXRlbXNQZXJQYWdlKQogICAgICAgIHRoaXMuZGlzcGxheVRvZG9zKCkKICAgICAgfSkKICAgICAgfWNhdGNoKGUpewogICAgICAgIGNvbnNvbGUubG9nKGUpCiAgICAgIH0KICAgIH0sCiAgICBuZXh0UGFnZTpmdW5jdGlvbiAoKXsgICAgCiAgICAgIGlmKHRoaXMucGFnZUluZGV4PHRoaXMudG9kb3NMaXN0RGF0YS5sZW5ndGgvbG9jYWxTdG9yYWdlLml0ZW1zUGVyUGFnZSkgewogICAgICB0aGlzLnBhZ2VJbmRleCArKzsKICAgICAgdGhpcy5sYXN0SXRlbUluZGV4ICs9IHBhcnNlSW50KGxvY2FsU3RvcmFnZS5pdGVtc1BlclBhZ2UpCiAgICAgIHRoaXMuZGlzcGxheVRvZG9zKCkKICAgICAgfQogICAgfSwKICAgIHByZXZQYWdlOmZ1bmN0aW9uICgpewogICAgICBpZih0aGlzLnBhZ2VJbmRleD4xKXsKICAgICAgdGhpcy5wYWdlSW5kZXggLS07CiAgICAgIHRoaXMubGFzdEl0ZW1JbmRleCAtPSBwYXJzZUludChsb2NhbFN0b3JhZ2UuaXRlbXNQZXJQYWdlKQogICAgICAgdGhpcy5kaXNwbGF5VG9kb3MoKQogICAgICB9CiAgICB9LCAKICAgIGRpc3BsYXlUb2RvczogZnVuY3Rpb24oKXsKICAgICAgdGhpcy5kaXNwbGF5ZWRUb2RvcyA9IHRoaXMuZmlsdGVyZFRvZG9zLnNsaWNlKHRoaXMubGFzdEl0ZW1JbmRleCwgcGFyc2VJbnQodGhpcy5sYXN0SXRlbUluZGV4KSArIHBhcnNlSW50KGxvY2FsU3RvcmFnZS5pdGVtc1BlclBhZ2UpKQogICAgfSwKICAgIHNldFBhZ2VTaXplOiBmdW5jdGlvbihwYWdlU2l6ZSl7CiAgICAgIHRyeXsKICAgICBsb2NhbFN0b3JhZ2UuaXRlbXNQZXJQYWdlID0gcGFnZVNpemUKICAgICB0aGlzLmxhc3RJdGVtSW5kZXggPSAwCiAgICAgdGhpcy5wYWdlSW5kZXggPSAxIAogICAgIHRoaXMucGFnZXNDb3VudCA9IE1hdGguY2VpbCh0aGlzLnRvZG9zTGlzdERhdGEubGVuZ3RoL2xvY2FsU3RvcmFnZS5pdGVtc1BlclBhZ2UpCiAgICAgdGhpcy5kaXNwbGF5VG9kb3MoKQogICAgICB9CiAgICAgIGNhdGNoKGUpewogICAgICAgIGNvbnNvbGUubG9nKGUpCiAgICAgIH0KICAgIH0sCgogICAgYXBwbHlGaWx0ZXIoZmlsdGVyVmFsdWUpeyAgIAogICAgICB0cnl7IAogICAgICBsb2NhbFN0b3JhZ2UuZmlsdGVyVmFsdWUgPSBmaWx0ZXJWYWx1ZQogICAgICBpZihmaWx0ZXJWYWx1ZS50b1VwcGVyQ2FzZSgpPT0gJ0FMTCcpewogICAgICB0aGlzLmZpbHRlcmRUb2RvcyA9IHRoaXMudG9kb3NMaXN0RGF0YQogICAgICB9CiAgICAgIGVsc2UgaWYoZmlsdGVyVmFsdWUudG9VcHBlckNhc2UoKT09ICdBJyl7CiAgICAgIHRoaXMuZmlsdGVyZFRvZG9zID0gdGhpcy50b2Rvc0xpc3REYXRhLmZpbHRlcih0b2RvPT4gIXRvZG8uY29tcGxldGVkKQogICAgICB9CiAgICAgICBlbHNlIGlmKGZpbHRlclZhbHVlLnRvVXBwZXJDYXNlKCk9PSAnQycpewogICAgIHRoaXMuZmlsdGVyZFRvZG9zID0gdGhpcy50b2Rvc0xpc3REYXRhLmZpbHRlcih0b2RvPT4gdG9kby5jb21wbGV0ZWQpCiAgICAgCiAgICAgIH0KICAgICB0aGlzLmxhc3RJdGVtSW5kZXggPSAwCiAgICAgdGhpcy5wYWdlSW5kZXggPTEKICAgICB0aGlzLnBhZ2VzQ291bnQgPSBNYXRoLmNlaWwodGhpcy5maWx0ZXJkVG9kb3MubGVuZ3RoL2xvY2FsU3RvcmFnZS5pdGVtc1BlclBhZ2UpCiAgICAgIHRoaXMuZGlzcGxheVRvZG9zKCkKICAgICAgfQogICAgICBjYXRjaChlKXsKICAgICAgICBjb25zb2xlLmxvZyhlKQogICAgICB9CiAgICB9LAogICAgZ2V0U2hvd09wdGlvbnMoKXsKICAgICAgcmV0dXJuIHRoaXMuc2hvd09wdGlvbnMgPSBbCiAgICAgICAgIHsKICAgICAgICAgICAgIHRleHQ6ImFsbCIsCiAgICAgICAgICAgICB2YWx1ZSA6ICdhbGwnCiAgICAgICAgIH0sCiAgICAgICAgIHsKICAgICAgICAgICAgIHRleHQ6ImFjdGl2ZSIsCiAgICAgICAgICAgICB2YWx1ZSA6ICdhJwogICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICAgdGV4dDoiY29tcGxldGVkIiwKICAgICAgICAgICAgIHZhbHVlIDonYycKICAgICAgICAgfSwKICAgICBdCiAgICB9LAogICAgZGVsZXRlVG9kbyhpZCl7CiAgICAgICAgIHRyeXsgICAgICAgICAgICAgICAgIAogICAgICBheGlvcy5kZWxldGUoYmFzZUFwaVVybCsnLycraWQpLnRoZW4oKCk9PnsgICAgICAgIAogICAgICAgIHRoaXMudG9kb3NMaXN0RGF0YSA9ICB0aGlzLnRvZG9zTGlzdERhdGEgLmZpbHRlcih0b2RvPT4gdG9kby5pZCAhPT0gaWQpCiAgICAgICAgIHRoaXMuZmlsdGVyZFRvZG9zID0gIHRoaXMudG9kb3NMaXN0RGF0YSAuZmlsdGVyKHRvZG89PnRvZG8uaWQgIT09IGlkKQogICAgICAgIHRoaXMuZGlzcGxheVRvZG9zKCkKICAgICAgfSl9CiAgICAgIGNhdGNoKGUpewogICAgICAgIGNvbnNvbGUubG9nKGUpCiAgICAgIH0KICAgIH0KICB9LAogIGJlZm9yZUNyZWF0ZSgpeyAgICAKICAgIHRyeXsKICAgIGF4aW9zLmdldChiYXNlQXBpVXJsKS50aGVuKHJlcz0+ewogICAgICBpZihsb2NhbFN0b3JhZ2UuZmlsdGVyVmFsdWUgPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICBsb2NhbFN0b3JhZ2UuZmlsdGVyVmFsdWU9J2FsbCcKICAgICAgICB9CiAgICAgIGlmKGxvY2FsU3RvcmFnZS5maWx0ZXJWYWx1ZS50b1VwcGVyQ2FzZSgpPT0nQUxMJyl7ICAgICAgICAKICAgICAgdGhpcy50b2Rvc0xpc3REYXRhID0gIHRoaXMuZmlsdGVyZFRvZG9zID0gcmVzLmRhdGEKICAgICAgfQogICAgICBlbHNlCiAgICAgIHsKICAgICAgICB0aGlzLnRvZG9zTGlzdERhdGEgPSAgcmVzLmRhdGEKICAgICAgICB0aGlzLmFwcGx5RmlsdGVyKGxvY2FsU3RvcmFnZS5maWx0ZXJWYWx1ZSkKICAgICAgfQogICAgICBpZighbG9jYWxTdG9yYWdlLml0ZW1zUGVyUGFnZSl7CiAgICAgICAgbG9jYWxTdG9yYWdlLml0ZW1zUGVyUGFnZSA9IDEwCiAgICAgIH0KICAgICAgdGhpcy5wYWdlc0NvdW50ID0gTWF0aC5jZWlsKHRoaXMudG9kb3NMaXN0RGF0YS5sZW5ndGgvbG9jYWxTdG9yYWdlLml0ZW1zUGVyUGFnZSkKICAgICAgdGhpcy5kaXNwbGF5ZWRUb2RvcyA9IHRoaXMudG9kb3NMaXN0RGF0YQogICAgICB0aGlzLmRpc3BsYXlUb2RvcygpCiAgICAgIHRoaXMuZ2V0U2hvd09wdGlvbnMoKQogICAgICB9KSAgICAgIAogICAgICAKICAgICAgCiAgICAgIC5jYXRjaChlcnJvcj0+ewogICAgICAgIGlmICghZXJyb3IucmVzcG9uc2UpIHsKICAgICAgICAgICBjb25zb2xlLmxvZyAoJ0Vycm9yOiBOZXR3b3JrIEVycm9yJyk7CiAgICAgICAgICAgdGhpcy50b2Rvc0xpc3REYXRhID0gdGhpcy5maWx0ZXJkVG9kb3MgPSAgc3RhdGljSnNvbi50b2RvcwogICAgICAgICAgIHRoaXMuZGlzcGxheVRvZG9zKCkKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLmVycm9yU3RhdHVzID0gZXJyb3IucmVzcG9uc2UuZGF0YS5tZXNzYWdlOwogICAgICAgIH0KICAgICAgfSkKICAgICAgfQogICAgICBjYXRjaChlKXsKICAgICAgICBjb25zb2xlLmxvZyhlKQogICAgICB9CiAgfSAgCn0K"},{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAqBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Home.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div id=\"app\">    \n    <AddTodo @add-todo=\"addTodo\"/>\n    <div class=\"container\">    \n      <div class=\"right\">\n        <TodosInfo :showOptions=\"showOptions\" @filter-changed=\"applyFilter\"/>\n      </div>   \n      <div :class=\"[pagesCount==0 || (pageIndex == pagesCount && pageIndex == 1 )?'hidden':'visible']\">\n      <div class=\"left\">\n        <Paging :currentPage=\"pageIndex\" :totalPages=\"pagesCount\" :todos=\"filterdTodos\"  @prev-page=\"prevPage\" @next-page=\"nextPage\" @page-size-changed=\"setPageSize\" />\n      </div> \n      </div>\n      <TodosList :todos=\"displayedTodos\" @del-todo=\"deleteTodo\" @complete=\"applyFilter(localStorage.filterValue)\"/>\n       <div :class=\"[filterdTodos.length>0 ?'hidden':'visible']\" class=\"alert alert-primary\">\n      <p>horaay! no tasks you got!</p>  \n      </div>\n      </div>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios'\nimport TodosList from '../components/todos-list.vue'\nimport TodosInfo from '../components/todos-info.vue'\nimport Paging from '../components/pages-navigation.vue'\nimport AddTodo from '../components/add-todo'\nimport staticJson from '../../db.json'\nimport {appConfigurations} from '../config'\nconst baseApiUrl = appConfigurations.baseApiUrl\n\nexport default {\n  name: 'Home',\n  components: {\n    TodosList,\n    Paging,\n    TodosInfo,\n    AddTodo\n  },\n  props:[\"pageSize\"],\n  data(){\n    return{\n      displayedTodos:[],\n      filterdTodos:[],\n      pageIndex : 1,\n      lastItemIndex :0,\n      pagesCount:0,\n     showOptions:[],\n     todosListData:[]\n    }\n  },\n  methods:{\n    addTodo(newTodo){\n      try{            \n        axios.post(baseApiUrl, newTodo).then(res=>{\n        this.filterdTodos.push(newTodo)\n        this.todosListData =  [...this.todosListData, res.data]\n        this.setPageSize(localStorage.itemsPerPage)\n        this.displayTodos()\n      })\n      }catch(e){\n        console.log(e)\n      }\n    },\n    nextPage:function (){    \n      if(this.pageIndex<this.todosListData.length/localStorage.itemsPerPage) {\n      this.pageIndex ++;\n      this.lastItemIndex += parseInt(localStorage.itemsPerPage)\n      this.displayTodos()\n      }\n    },\n    prevPage:function (){\n      if(this.pageIndex>1){\n      this.pageIndex --;\n      this.lastItemIndex -= parseInt(localStorage.itemsPerPage)\n       this.displayTodos()\n      }\n    }, \n    displayTodos: function(){\n      this.displayedTodos = this.filterdTodos.slice(this.lastItemIndex, parseInt(this.lastItemIndex) + parseInt(localStorage.itemsPerPage))\n    },\n    setPageSize: function(pageSize){\n      try{\n     localStorage.itemsPerPage = pageSize\n     this.lastItemIndex = 0\n     this.pageIndex = 1 \n     this.pagesCount = Math.ceil(this.todosListData.length/localStorage.itemsPerPage)\n     this.displayTodos()\n      }\n      catch(e){\n        console.log(e)\n      }\n    },\n\n    applyFilter(filterValue){   \n      try{ \n      localStorage.filterValue = filterValue\n      if(filterValue.toUpperCase()== 'ALL'){\n      this.filterdTodos = this.todosListData\n      }\n      else if(filterValue.toUpperCase()== 'A'){\n      this.filterdTodos = this.todosListData.filter(todo=> !todo.completed)\n      }\n       else if(filterValue.toUpperCase()== 'C'){\n     this.filterdTodos = this.todosListData.filter(todo=> todo.completed)\n     \n      }\n     this.lastItemIndex = 0\n     this.pageIndex =1\n     this.pagesCount = Math.ceil(this.filterdTodos.length/localStorage.itemsPerPage)\n      this.displayTodos()\n      }\n      catch(e){\n        console.log(e)\n      }\n    },\n    getShowOptions(){\n      return this.showOptions = [\n         {\n             text:\"all\",\n             value : 'all'\n         },\n         {\n             text:\"active\",\n             value : 'a'\n         },\n          {\n             text:\"completed\",\n             value :'c'\n         },\n     ]\n    },\n    deleteTodo(id){\n         try{                 \n      axios.delete(baseApiUrl+'/'+id).then(()=>{        \n        this.todosListData =  this.todosListData .filter(todo=> todo.id !== id)\n         this.filterdTodos =  this.todosListData .filter(todo=>todo.id !== id)\n        this.displayTodos()\n      })}\n      catch(e){\n        console.log(e)\n      }\n    }\n  },\n  beforeCreate(){    \n    try{\n    axios.get(baseApiUrl).then(res=>{\n      if(localStorage.filterValue == undefined) {\n          localStorage.filterValue='all'\n        }\n      if(localStorage.filterValue.toUpperCase()=='ALL'){        \n      this.todosListData =  this.filterdTodos = res.data\n      }\n      else\n      {\n        this.todosListData =  res.data\n        this.applyFilter(localStorage.filterValue)\n      }\n      if(!localStorage.itemsPerPage){\n        localStorage.itemsPerPage = 10\n      }\n      this.pagesCount = Math.ceil(this.todosListData.length/localStorage.itemsPerPage)\n      this.displayedTodos = this.todosListData\n      this.displayTodos()\n      this.getShowOptions()\n      })      \n      \n      \n      .catch(error=>{\n        if (!error.response) {\n           console.log ('Error: Network Error');\n           this.todosListData = this.filterdTodos =  staticJson.todos\n           this.displayTodos()\n        } else {\n            this.errorStatus = error.response.data.message;\n        }\n      })\n      }\n      catch(e){\n        console.log(e)\n      }\n  }  \n}\n</script>\n\n<style>\nbody{\n  margin:0;\n  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n}\n\n.right{\n  float: right;\n}\n.left{\n  float: left;\n}\n.container{\n  padding: 24px 12px;\n}\n.visible{\n  display: block;\n}\n.hidden{\n  display: none;\n}\ninput[type=\"checkbox\"]{\n  width:32px;\n  height: 32px;\n  margin:12px;\n}\n</style>\n"]}]}